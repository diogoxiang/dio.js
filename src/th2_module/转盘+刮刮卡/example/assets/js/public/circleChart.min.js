define([],function(){var t=function(t){t&&{}!==t&&t.id&&""!==t.id&&(this.options=t,this._initProp())};return t.prototype={construct:t,_initProp:function(){this.canvas=document.querySelector("#"+this.options.id),this.ctx=this.canvas.getContext("2d"),this.callback=this.options.callback,this.angleTotal=360,this.total=this.options.total||5,this.number=parseFloat(this.options.number||2),this.avg=this.angleTotal/this.total,this.style={strokeStyle:this.options.style&&this.options.style.strokeStyle||"#FFBA00",lineWidth:this.options.style&&this.options.style.lineWidth||6,fontColor:this.options.style&&this.options.style.strokeStyle||"#FFBA00",font:this.options.style&&this.options.style.font||"normal 3.5em Microsoft Yahei"},this.text=this.options.text||this.number.toFixed(1)||"0.0",this.width=this.options.width||this.canvas.width||130,this.height=this.options.height||this.canvas.height||130,this.raduis=.5*this.width-this.style.lineWidth,this.position={x:.5*this.width,y:.5*this.height},this.index=0,this.deg=0,this.dif=0,this.stin=null},init:function(){return this.drawBack(),this},draw:function(){return this.deg++,this.clearCanvas(),this.drawBack(!0),this.drawText(this.text),this},drawBack:function(t){return this.ctx.strokeStyle="rgba(255,255,255,1)",this.ctx.lineWidth=this.style.lineWidth,this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this.raduis,0,2*Math.PI,!1),this.ctx.stroke(),t&&this.drawFill(this.deg),this},drawFill:function(t){this.dif=this.angleTotal-t;var i=t*Math.PI/180+1.5*Math.PI;return this.ctx.strokeStyle=this.style.strokeStyle,this.ctx.lineWidth=this.style.lineWidth,this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this.raduis,1.5*Math.PI,i,!1),this.ctx.stroke(),this},drawText:function(t){this.text=t,this.ctx.fillStyle=this.style.fontColor,this.ctx.font=this.style.font;var i=this.ctx.measureText(t).width,s=.5*(this.width-i),h=.52*this.height;return this.ctx.fillText(Number(t).toFixed(1),s,h),this},start:function(t){var i=this;return this._extend(t),this._initProp(),this.stin=window.setInterval(function(){return i.deg>=i.number*i.avg?(i.end(),!1):void i.draw()},0),this},clearCanvas:function(){this.ctx.clearRect(0,0,this.width,this.height)},end:function(){window.clearInterval(this.stin),this.callback&&"function"==typeof this.callback&&this.callback(this.options.target||this),this.stin=null,this.index=0,this.radius=0,this.deg=0,this.dif=0,this.callback=null},_extend:function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])}},t});